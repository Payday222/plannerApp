<!DOCTYPE html>
<head> 
    <title>Your D&D Campaign</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            padding: 0;
            display: flex;
            justify-content: flex-start; /* Ensure the left panel sticks to the left */
            align-items: flex-start; /* Align the content to the top */
            margin: 0;
            overflow: auto;
            height: 100vh;
        }
    
        #leftPanel {
            background-color: #2e3b4e;
            color: white;
            padding: 20px;
            width: 200px;
            height: 100vh;
            display: flex;
            flex-direction: column;
            gap: 10px;
            position: fixed; /* This will keep the panel on the left side, even when scrolling */
            left: 0;
        }
    
        #leftPanel button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            text-align: left;
            border-radius: 5px;
            font-size: 14px;
        }
    
        #leftPanel button:hover {
            background-color: #45a049;
        }
    
        #FormContainer {
            margin-left: 220px; /* Adds space so the content doesn't overlap with the left panel */
            padding: 20px;
            width: 70%;
            max-width: 800px;
            background-color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }
    
        form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
    
        label {
            font-weight: bold;
            font-size: 16px;
        }
    
        input[type="text"],
        input[type="number"],
        input[type="checkbox"],
        input[type="file"] {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            width: 100%;
            margin-top: 5px;
        }
    
        input[type="checkbox"] {
            width: auto;
        }
    
        button[type="button"] {
            background-color: #007BFF;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            width: 150px;
            margin-top: 20px;
            align-self: center;
        }
    
        button[type="button"]:hover {
            background-color: #0056b3;
        }
    
        h1 {
            font-size: 24px;
            text-align: center;
            color: #333;
        }        
        #gridContainer {
            display: grid;
            grid-template-columns: repeat(auto-fill, 50px); /* Auto-fill with 50px wide cells */
            grid-auto-rows: 50px; /* Set row height to 50px */
            gap: 0; /* No gap between cells */
            overflow: auto; /* Enable scrolling when content overflows */
            width: 100%; /* Adjust to fill the container */
            height: 100vh; /* Adjust height as needed */
            position: relative;
            border: 1px solid #000; /* Add a border to see the grid container */
            min-width: 100%; /* Make sure the container can expand horizontally */
        }
        
        .cell {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px; /* Cell width */
            height: 50px; /* Cell height */
            border: 1px solid #ccc;
            box-sizing: border-box; /* Include padding and border in width/height */
            background-color: #f9f9f9;
        }        
        .cell:hover {
            background-color: #f0f0f0;
        }
        div[class^="cell"] {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px; /* Cell width */
            height: 50px; /* Cell height */
            border: 1px solid #ccc;
            box-sizing: border-box; /* Include padding and border in width/height */
            background-color: #f9f9f9;
          }
        div[class^="cell"]:hover {
            background-color: #f0f0f0;
        }
        .tooltip {
            position: absolute;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px;
            border-radius: 5px;
            font-size: 12px;
            display: none;
            white-space: pre-wrap; /* Keeps JSON formatting */
            z-index: 1000;
            width: fi;
            height: fit-content;
            font-size: medium;
        }
        
    </style>
    
</head>

<body>
    <div id="leftPanel">
        <button id="createNPC">Create NPC</button>
        <button id="createMonster">Create Monster</button>
        <button id="createStructure">Create Structure</button>
        <button id="createDungeon">Create Dungeon</button>
        <button id="createBuilding">Create Building</button>
        <button id="createProp">Create Prop</button>
        <button id="createLoot">Create Loot Item</button>
        <button id="createChest">Create Loot Chest</button>
    </div>

    <div id="FormContainer"></div> 

    <div id="gridContainer"></div>
    <script src="grid.js"></script>
    <script>
        
        document.getElementById('createNPC').addEventListener('click', () => {
            // Clear existing form if already open
            const container = document.getElementById("FormContainer");
            container.innerHTML = "";
        
            // Create form
            const form = document.createElement("form");
            form.id = "npcForm";
        
            // NPC class
            class NPC {
                constructor(name, gender, age, race, profession, description, alignment, coordinates) {
                    this.name = name;
                    this.gender = gender;
                    this.age = age;
                    this.race = race;
                    this.profession = profession;
                    this.description = description;
                    this.alignment = alignment;
                    this.coordinates = coordinates;  // New property for coordinates
                }
            }
        
            // Fields for NPC
            const NPCfields = ["Name", "Gender", "Age", "Race", "Profession", "Description", "Alignment"];
            NPCfields.forEach(field => {
                const label = document.createElement("label");
                label.textContent = field + ":";
                const input = document.createElement("input");
                input.type = field === "Age" ? "number" : "text"; // Age field as number
                input.id = field.toLowerCase();
                
                form.appendChild(label);
                form.appendChild(input);
                form.appendChild(document.createElement("br"));
            });
        
            // Coordinates field
            const coordinateLabel = document.createElement('label');
            coordinateLabel.textContent = "Select tile";
            const coordinateInput = document.createElement('input');
            coordinateInput.id = "coordinateInput";
            form.appendChild(coordinateLabel);
            form.appendChild(coordinateInput);
            form.appendChild(document.createElement("br"));
        
            // Submit button
            const submitButton = document.createElement("button");
            submitButton.textContent = "Save NPC";
            submitButton.type = "button";
            submitButton.addEventListener("click", () => {
                // Get input values
                const npc = new NPC(
                    document.getElementById("name").value,
                    document.getElementById("gender").value,
                    document.getElementById("age").value,
                    document.getElementById("race").value,
                    document.getElementById("profession").value,
                    document.getElementById("description").value,
                    document.getElementById("alignment").value,
                    document.getElementById("coordinateInput").value // Get coordinates
                );
        
                console.log("New NPC Created:", npc); // Log for now (store it somewhere)
                let coordinates = document.getElementById('coordinateInput').value;
                console.log("Spawning dungeon at:", coordinates);
                const parts = coordinates.split(',');
                const x = parts[0];
                const y = parts[1];
                console.log('x:', x, "y:", y);
                const cellID = `cell${x}${y}`;
                console.log('cellID:', cellID);
                const cell = document.getElementById(cellID);
                console.log(cell);
                SaveOnMap(x,y,npc);
            });
            container.appendChild(createImageLibrary());
            container.appendChild(form);
            form.appendChild(submitButton);
        });
        
        document.getElementById('createMonster').addEventListener('click', () => {
            // Monster class
            class Monster {
                constructor(name, isHostile, age, alignment, damage, isVisible, level, XP_reward, description, coordinates) {
                    this.name = name;
                    this.isHostile = isHostile;
                    this.age = age;
                    this.alignment = alignment;
                    this.damage = damage;
                    this.isVisible = isVisible;
                    this.level = level;
                    this.XP_reward = XP_reward;
                    this.description = description;
                    this.coordinates = coordinates; // New property for coordinates
                }
            }
        
            const container = document.getElementById("FormContainer");
            container.innerHTML = "";
        
            // Create form
            const form = document.createElement("form");
            form.id = "monsterForm";
        
            const monsterFields = ["Name", "is Hostile", "Age", "Alignment", "Damage", "is Visible", "Level", "XP reward", "Description"];
            monsterFields.forEach(field => {
                const label = document.createElement("label");
                label.textContent = field + ":";
                const input = document.createElement("input");
        
                if (field === "Age" || field === "Damage" || field === "Level" || field === "XP reward") {
                    input.type = "number";
                } else if (field === "is Hostile" || field === "is Visible") {
                    input.type = "checkbox";
                } else {
                    input.type = "text";
                }
                input.id = field.toLowerCase().replace(/\s+/g, '_'); // Convert field names to valid IDs
        
                form.appendChild(label);
                form.appendChild(input);
                form.appendChild(document.createElement("br"));
            });
        
            // Coordinates field
            const coordinateLabel = document.createElement('label');
            coordinateLabel.textContent = "Select tile";
            const coordinateInput = document.createElement('input');
            coordinateInput.id = "coordinateInput";
            form.appendChild(coordinateLabel);
            form.appendChild(coordinateInput);
            form.appendChild(document.createElement("br"));
        
            // Submit button
            const submitButton = document.createElement("button");
            submitButton.textContent = "Save Monster";
            submitButton.type = "button";
            submitButton.addEventListener("click", () => {
                // Get input values
                const monster = new Monster(
                    document.getElementById("name").value,
                    document.getElementById("is_hostile").checked,
                    document.getElementById("age").value,
                    document.getElementById("alignment").value,
                    document.getElementById("damage").value,
                    document.getElementById("is_visible").checked,
                    document.getElementById("level").value,
                    document.getElementById("xp_reward").value,
                    document.getElementById("description").value,
                    document.getElementById("coordinateInput").value // Get coordinates
                );
                let coordinates = document.getElementById('coordinateInput').value;
                console.log("Spawning dungeon at:", coordinates);
        
                const parts = coordinates.split(',');
                const x = parts[0];
                const y = parts[1];
                console.log('x:', x, "y:", y);
                const cellID = `cell${x}${y}`;
                console.log('cellID:', cellID);
                const cell = document.getElementById(cellID);
                console.log(cell);
                SaveOnMap(X,Y,monster);
                console.log("New Monster Created:", monster);
            });
            container.appendChild(createImageLibrary());
            container.appendChild(form);
            form.appendChild(submitButton);
        });
        
        document.getElementById('createStructure').addEventListener('click', () => {
            // Structure class
            class Structure {
                constructor(name, description, size, population, government, location, isFriendly, climate, loot, quests, secrets, coordinates) {
                    this.name = name;
                    this.description = description;
                    this.size = size;
                    this.population = population;
                    this.government = government;
                    this.location = location;
                    this.isFriendly = isFriendly;
                    this.climate = climate;
                    this.loot = loot;
                    this.quests = quests;
                    this.secrets = secrets;
                    this.coordinates = coordinates; // New property for coordinates
                }
            }
        
            const container = document.getElementById("FormContainer");
            container.innerHTML = "";
        
            // Create form
            const form = document.createElement("form");
            form.id = "structureForm";
        
            const structureFields = ["name", "description", "size", "population", "government", "location", "is_friendly", "climate", "loot", "quests", "secrets"];
            structureFields.forEach(field => {
                const label = document.createElement('label');
                label.textContent = field + ":";
                const input = document.createElement('input');
        
                if (field === "population") {
                    input.type = "number";
                } else if (field === "is Friendly") {
                    input.type = "checkbox";
                } else {
                    input.type = "text";
                }
        
                input.id = field.toLowerCase();
                form.appendChild(label);
                form.appendChild(input);
                form.appendChild(document.createElement("br"));
            });
        
            // Coordinates field
            const coordinateLabel = document.createElement('label');
            coordinateLabel.textContent = "Select tile";
            const coordinateInput = document.createElement('input');
            coordinateInput.id = "coordinateInput";
            form.appendChild(coordinateLabel);
            form.appendChild(coordinateInput);
            form.appendChild(document.createElement("br"));
        
            // Submit button
            const submitButton = document.createElement("button");
            submitButton.textContent = "Save Structure";
            submitButton.type = "button";
            submitButton.addEventListener("click", () => {
                // Get input values
                const structure = new Structure(
                    document.getElementById('name').value,
                    document.getElementById('description').value,
                    document.getElementById('size').value,
                    document.getElementById('population').value,
                    document.getElementById('government').value,
                    document.getElementById('location').value,
                    document.getElementById('is_friendly').checked,
                    document.getElementById('climate').value,
                    document.getElementById('loot').value,
                    document.getElementById('quests').value,
                    document.getElementById('secrets').value,
                    document.getElementById('coordinateInput').value // Get coordinates
                );
                let coordinates = document.getElementById('coordinateInput').value;
                console.log("Spawning dungeon at:", coordinates);
        
                const parts = coordinates.split(',');
                const x = parts[0];
                const y = parts[1];
                console.log('x:', x, "y:", y);
                const cellID = `cell${x}${y}`;
                console.log('cellID:', cellID);
                const cell = document.getElementById(cellID);
                console.log(cell);
                SaveOnMap(x,y,structure);
                console.log("New Structure Created:", structure);
            });
            container.appendChild(createImageLibrary());
            container.appendChild(form);
            form.appendChild(submitButton);
        });
        

    document.getElementById('createDungeon').addEventListener('click', () => {
        const container = document.getElementById("FormContainer");
        container.innerHTML = "";
    
        class Dungeon {
            constructor(name, description, loot, monsters, boss, map, roomCount, difficulty, NPCs, riddles, puzzles, secrets) {
                this.name = name;
                this.description = description;
                this.loot = loot;
                this.monsters = monsters;
                this.boss = boss;
                this.map = map;
                this.roomCount = roomCount;
                this.difficulty = difficulty;
                this.NPCs = NPCs;
                this.riddles = riddles;
                this.puzzles = puzzles;
                this.secrets = secrets;
            }
        }
    
        const form = document.createElement("form");
        form.id = "dungeonForm";
        const dungeonFields = ["name", "description", "loot", "monsters", "boss", "map", "roomCount", "difficulty", "NPCs", "riddles", "puzzles", "secrets"];
    
        dungeonFields.forEach(field => {
            const label = document.createElement('label');
            label.textContent = field + ":";
            const input = document.createElement('input');
    
            if (field === "roomCount") {
                input.type = "number";
            } else if (field === "map") {
                input.type = "file";
            } else {
                input.type = "text";
            }
            input.id = "dungeonInput" + field;
    
            form.appendChild(label);
            form.appendChild(input);
            form.appendChild(document.createElement("br"));
        });
    
        // Adding coordinates input
        const coordinateLabel = document.createElement('label');
        coordinateLabel.textContent = "Select tile";
        const coordinateInput = document.createElement('input');
        coordinateInput.id = "coordinateInput";
        form.appendChild(coordinateLabel);
        form.appendChild(coordinateInput);
    
        const submitButton = document.createElement("button");
        submitButton.textContent = "Save Dungeon";
        submitButton.type = "button";
        submitButton.addEventListener('click', () => {
            const dungeon = new Dungeon(
                document.getElementById('dungeonInputname').value,
                document.getElementById('dungeonInputdescription').value,
                document.getElementById('dungeonInputloot').value,
                document.getElementById('dungeonInputmonsters').value,
                document.getElementById('dungeonInputboss').value,
                document.getElementById('dungeonInputmap').files[0], // Assuming file is selected
                document.getElementById('dungeonInputroomCount').value,
                document.getElementById('dungeonInputdifficulty').value,
                document.getElementById('dungeonInputNPCs').value,
                document.getElementById('dungeonInputriddles').value,
                document.getElementById('dungeonInputpuzzles').value,
                document.getElementById('dungeonInputsecrets').value
            );
            console.log("New dungeon created", dungeon);
    
            let coordinates = document.getElementById('coordinateInput').value;
            console.log("Spawning dungeon at:", coordinates);
    
            const parts = coordinates.split(',');
            const x = parts[0];
            const y = parts[1];
            console.log('x:', x, "y:", y);
            const cellID = `cell${x}${y}`;
            console.log('cellID:', cellID);
            const cell = document.getElementById(cellID);
            console.log(cell);
            SaveOnMap(x,y, dungeon);
        });
    
        container.appendChild(createImageLibrary());
        form.appendChild(submitButton);
        container.appendChild(form);
    });
    

    document.getElementById('createBuilding').addEventListener('click', () => {
        const container = document.getElementById('FormContainer');
        container.innerHTML = "";
    
        class Building {
            constructor(name, description, type, NPCs, Hostile, Accessible, Locked, Shop, Rooms) {
                this.name = name;
                this.description = description;
                this.type = type;
                this.NPCs = NPCs;
                this.Hostile = Hostile;
                this.Accessible = Accessible;
                this.Locked = Locked;
                this.Shop = Shop;
                this.Rooms = Rooms;
            }
        }
    
        const form = document.createElement('form');
        form.id = 'buildingForm';
        const buildingFields = ["name", "description", "type", "NPCs", "Hostile", "Accessible", "Locked", "Shop", "Rooms"];
    
        buildingFields.forEach(field => {
            const label = document.createElement('label');
            label.textContent = field + ":";
            const input = document.createElement('input');
            input.id = 'buildingInput' + field;
    
            if (field === "Hostile" || field === "Accessible" || field === "Locked" || field === "Shop") {
                input.type = 'checkbox';
            } else {
                input.type = "text";
            }
            form.appendChild(label);
            form.appendChild(input);
            form.appendChild(document.createElement('br'));
        });
    
        const coordinateLabel = document.createElement('label');
        coordinateLabel.textContent = "Select tile";
        const coordinateInput = document.createElement('input');
        coordinateInput.id = "coordinateInput";
        form.appendChild(coordinateLabel);
        form.appendChild(coordinateInput);
    
        const submitButton = document.createElement('button');
        submitButton.textContent = "Create Building";
        submitButton.type = "button";
        submitButton.addEventListener('click', () => {
            const building = new Building(
                document.getElementById('buildingInputname').value,
                document.getElementById('buildingInputdescription').value,
                document.getElementById('buildingInputtype').value,
                document.getElementById('buildingInputNPCs').value,
                document.getElementById('buildingInputHostile').checked,
                document.getElementById('buildingInputAccessible').checked,
                document.getElementById('buildingInputLocked').checked,
                document.getElementById('buildingInputShop').checked,
                document.getElementById('buildingInputRooms').value
            );
            console.log('New building created:', building);
    
            let coordinates = document.getElementById('coordinateInput').value;
            console.log("Spawning building at:", coordinates);
            let parts = coordinates.split(',');
            let x = parts[0];
            let y = parts[1];
            console.log('x:', x, "y:", y);
            const cellID = `cell${x}${y}`;
            console.log('cellID:', cellID);
            const cell = document.getElementById(cellID);
            console.log(cell);
    
            SaveOnMap(x, y, building);
        });
    
        container.appendChild(createImageLibrary());
        form.appendChild(submitButton);
        container.appendChild(form);
    });
    

    document.getElementById('createProp').addEventListener('click', () => {
        const container = document.getElementById('FormContainer');
        container.innerHTML = "";
    
        class Prop {
            constructor(image, name, description, func) {
                this.image = image;
                this.name = name;
                this.description = description;
                this.func = func;
            }
        }
    
        const form = document.createElement('form');
        form.id = 'propForm';
        const propFields = ["image", "name", "description", "function"];
    
        propFields.forEach(field => {
            const label = document.createElement('label');
            label.textContent = field + ":";
            const input = document.createElement('input');
            input.id = 'propInput' + field;
    
            if (field === "image") {
                input.type = "file";
            } else {
                input.type = "text";
            }
            
            form.appendChild(label);
            form.appendChild(input);
            form.appendChild(document.createElement('br'));
        });
    
        const submitButton = document.createElement('button');
        submitButton.textContent = "Create Prop";
        submitButton.type = "button";
        submitButton.addEventListener('click', () => {
            const prop = new Prop(
                document.getElementById('propInputimage').files[0],
                document.getElementById('propInputname').value,
                document.getElementById('propInputdescription').value,
                document.getElementById('propInputfunction').value
            );
    
            console.log('New prop created', prop);
            
        //! coordinates
            let coordinates = document.getElementById('coordinateInput').value;
            console.log("spawning dungeon at:", coordinates);
            parts = coordinates.split(',');
            x =  parts[0];
            y = parts[1];
            console.log('x:',x, "y", y)
            const cellID = `cell${x}${y}`;
            console.log('cellID: ', cellID);
            const cell = document.getElementById(cellID);
            console.log(cell);
            SaveOnMap(x,y, prop);
                
        });

    //! coordinates
     const coordinateLabel = document.createElement('label');
     coordinateLabel.textContent = "Select tile";
     const coordinateInput = document.createElement('input');
     coordinateInput.id = "coordinateInput";
     form.appendChild(coordinateLabel);
     form.appendChild(coordinateInput);
     //!
     container.appendChild(createImageLibrary());
    form.appendChild(submitButton);
    container.appendChild(form);
     //!
        container.appendChild(createImageLibrary());
        form.appendChild(submitButton);
        container.appendChild(form);
    });
    
    document.getElementById('createLoot').addEventListener('click', () => {
        const container = document.getElementById('FormContainer');
        container.innerHTML = "";
    
        class Loot {
            constructor(name, location, description, visible, value, guarded, guards) {
                this.name = name;
                this.location = location;
                this.description = description;
                this.visible = visible;
                this.value = value;
                this.guarded = guarded;
                this.guards = guards;
            }
        }
    
        const form = document.createElement('form');
        form.id = 'lootForm';
        const lootFields = ["name", "location", "description", "Visible", "Value", "Guarded", "guards"];
    
        lootFields.forEach(field => {
            const label = document.createElement('label');
            label.textContent = field + ":";
            const input = document.createElement('input');
            input.id = 'lootInput' + field;
    
            if (field === "Visible" || field === "Guarded") {
                input.type = "checkbox";
            } else {
                input.type = "text";
            }
    
            form.appendChild(label);
            form.appendChild(input);
            form.appendChild(document.createElement('br'));
        });
    
        const submitButton = document.createElement('button');
        submitButton.textContent = "Create Loot";
        submitButton.type = "button";
        submitButton.addEventListener('click', () => {
            const loot = new Loot(
                document.getElementById('lootInputname').value,
                document.getElementById('lootInputlocation').value,
                document.getElementById('lootInputdescription').value,
                document.getElementById('lootInputVisible').checked,
                document.getElementById('lootInputValue').value,
                document.getElementById('lootInputGuarded').checked,
                document.getElementById('lootInputguards').value
            );
    
            console.log('New loot created', loot);
            let coordinates = document.getElementById('coordinateInput').value;
            console.log("spawning dungeon at:", coordinates);
            parts = coordinates.split(',');
            x =  parts[0];
            y = parts[1];
            console.log('x:',x, "y", y)
            const cellID = `cell${x}${y}`;
            console.log('cellID: ', cellID);
            const cell = document.getElementById(cellID);
            console.log(cell);
            SaveOnMap(x,y, loot)
        });
     const coordinateLabel = document.createElement('label');
     coordinateLabel.textContent = "Select tile";
     const coordinateInput = document.createElement('input');
     coordinateInput.id = "coordinateInput";
     form.appendChild(coordinateLabel);
     form.appendChild(coordinateInput);
     //!

        container.appendChild(createImageLibrary());
        form.appendChild(submitButton);
        container.appendChild(form);

    });
    document.getElementById('createChest').addEventListener('click', () => {
        const container = document.getElementById('FormContainer');
        container.innerHTML = "";
    
        class Chest {
            constructor(name, location, description, contents, locked, key, guarded, guards, visible) {
                this.name = name;
                this.location = location;
                this.description = description;
                this.contents = contents;
                this.locked = locked;
                this.key = key;
                this.guarded = guarded;
                this.guards = guards;
                this.visible = visible;
            }
        }
    
        const form = document.createElement('form');
        form.id = 'chestForm';
        const chestFields = ["name", "location", "description", "contents", "locked", "key", "guarded", "guards", "visible"];
    
        chestFields.forEach(field => {
            const label = document.createElement('label');
            label.textContent = field + ":";
            const input = document.createElement('input');
            input.id = 'chestInput' + field;
    
            if (["locked", "guarded", "visible"].includes(field)) {
                input.type = "checkbox";
            } else {
                input.type = "text";
            }
    
            form.appendChild(label);
            form.appendChild(input);
            form.appendChild(document.createElement('br'));
        });
    
        //! Coordinates Input
        const coordinateLabel = document.createElement('label');
        coordinateLabel.textContent = "Select tile (x,y):";
        const coordinateInput = document.createElement('input');
        coordinateInput.id = "coordinateInput";
        form.appendChild(coordinateLabel);
        form.appendChild(coordinateInput);
        
        //! Submit Button
        const submitButton = document.createElement('button');
        submitButton.textContent = "Create Chest";
        submitButton.type = "button";
        submitButton.addEventListener('click', () => {
            const chest = new Chest(
                document.getElementById('chestInputname').value,
                document.getElementById('chestInputlocation').value,
                document.getElementById('chestInputdescription').value,
                document.getElementById('chestInputcontents').value,
                document.getElementById('chestInputlocked').checked,
                document.getElementById('chestInputkey').value,
                document.getElementById('chestInputguarded').checked,
                document.getElementById('chestInputguards').value,
                document.getElementById('chestInputvisible').checked
            );
    
            let coordinates = document.getElementById('coordinateInput').value.trim();
            let parts = coordinates.split(',');
            if (parts.length < 2) {
                console.error("Invalid coordinates!");
                return;
            }
    
            let x = parts[0].trim();
            let y = parts[1].trim();
            const cellID = `cell${x}${y}`;
            console.log('cellID:', cellID);
            const cells = document.getElementsByClassName(cellID);
    
            if (cells.length === 0) {
                console.error('Cell not found:', cellID);
                return;
            }
    
            SaveOnMap(x, y, chest);
        });
    
        form.appendChild(submitButton);
        container.appendChild(createImageLibrary());
        container.appendChild(form);
    });
    

    const imageLibrary = [
    "images/campfire.jpg",
    "images/castle.jpg",
    "images/castleRuin.jpg",
    "images/cathedral.jpg",
    "images/city.jpg",
    "images/crater.jpg",
    "images/dark_tower.jpg",
    "images/dwarf_thing.jpg",
    "images/fortified_tower_ruin.jpg",
    "images/fortress.jpg",
    "images/house.jpg",
    "images/hut.jpg",
    "images/keep.jpg",
    "images/mill.jpg",
    "images/mine.jpg",
    "images/mine_ruin.jpg",
    "images/monster_city.jpg",
    "images/monster_village.jpg",
    "images/orc_camp.jpg",
    "images/small_city.jpg",
    "images/small_city_smothing.jpg",
    "images/small_tower.jpg",
    "images/strange_castle.jpg",
    "images/tavern.jpg",
    "images/tavern_ruin.jpg",
    "images/tower.jpg",
    "images/town.jpg",
    "images/town_ruin.jpg",
    "images/town_stone.jpg",
    "images/town_wood.jpg",
    "images/village.jpg",
    "images/village_stone.jpg",
    "images/village_stone_ruin.jpg",
    "images/village_wood.jpg",
    "images/witch_hut.jpg",
    "images/wood_gate.jpg",
    "images/wood_wall.jpg"
    ];

    let selectedImage = null; // To keep track of the current set of images
    let currentIndex = 0;
    function createImageLibrary() {
        const container = document.createElement('div');
        container.id = 'imgLib';
        container.style.display = 'flex';
        container.style.height = '500px';
        container.style.gap = '10px';
        
        const imgContainer = document.createElement('div');
        imgContainer.id = 'imageContainer';
        imgContainer.style.display = 'flex';
        
        // Function to update the displayed images
        function updateImages() {
            imgContainer.innerHTML = ""; // Clear current images
            const imagesToShow = imageLibrary.slice(currentIndex, currentIndex + 3); // Get the next 3 images
            imagesToShow.forEach(src => {
                let img = document.createElement('img');
                img.src = src;
                img.style.width = '50px'; // Set a fixed width for images
                img.style.height = '100px'; // Maintain aspect ratio
                img.addEventListener('click', () => {
                    selectedImage = src;
                    document.querySelectorAll("#imageContainer img").forEach(i => i.style.border = "none");
                    img.style.border = "3px solid red";
                });
                imgContainer.appendChild(img);
            });
        }
    
        // Create navigation buttons
        const prevButton = document.createElement('button');
        prevButton.textContent = 'Previous';
        prevButton.addEventListener('click', () => {
            if (currentIndex > 0) {
                currentIndex -= 3; // Move back by 3 images
                updateImages();
            } else {
                currentIndex = imageLibrary.length - 1;
                updateImages();
            }
        });
    
        const nextButton = document.createElement('button');
        nextButton.textContent = 'Next';
        nextButton.addEventListener('click', () => {
            if (currentIndex + 3 < imageLibrary.length) {
                currentIndex += 3; // Move forward by 3 images
                updateImages();
            } else {
                currentIndex = 0;
                updateImages();
            }
            
        }); 
        prevButton.style.height = '50px';
        nextButton.style.height = '50px';
    
        // Initial image display
        updateImages();
    
        container.appendChild(prevButton);
        container.appendChild(imgContainer);
        container.appendChild(nextButton);
        
        return container;
    }
    function SaveOnMap(x, y, ObjectData) {
        const cells = document.getElementsByClassName(`cell${x}${y}`);
        if (cells.length === 0) {
            console.error(`Cell with class "cell${x}${y}" not found!`);
            return;
        }
        console.log('PASSED DATA:', x, y, ObjectData);
    
        const cell = cells[0]; // Get the first cell
    
        // Create the image and add it to the cell
        const cellIMG = document.createElement('img');
        cellIMG.src = selectedImage;
        cellIMG.style.width = '50px';
        cellIMG.style.height = '50px';
        cell.appendChild(cellIMG);
    
        // Create a tooltip (hidden by default)
        const tooltip = document.createElement('div');
        tooltip.classList.add('tooltip');
        tooltip.textContent = JSON.stringify(ObjectData, null, 2);
        document.body.appendChild(tooltip);
    
        // Event Listeners for hover
        cell.addEventListener('mouseenter', (event) => {
            tooltip.style.display = 'block';
            tooltip.style.left = event.pageX + 10 + 'px';
            tooltip.style.top = event.pageY + 10 + 'px';
        });
    
        cell.addEventListener('mousemove', (event) => {
            tooltip.style.left = event.pageX + 10 + 'px';
            tooltip.style.top = event.pageY + 10 + 'px';
        });
    
        cell.addEventListener('mouseleave', () => {
            tooltip.style.display = 'none';
        });
    }
    
    </script>
</body>
